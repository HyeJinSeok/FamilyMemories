# ì—¬ê°€éŒ„(ë¡)

<br>

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ íŒ€ì› ì†Œê°œ

|<img src="https://avatars.githubusercontent.com/u/193798531?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/153366521?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/74342019?v=4" width="150" height="150"/>|<img src="https://avatars.githubusercontent.com/u/127267532?v=4" width="150" height="150"/>|
|:-:|:-:|:-:|:-:|
|ê¹€ë¦¬ì˜ (Kim Ri-yeong)<br/>[@riyeong0916](https://github.com/riyeong0916)|Park ji hye<br/>[@parkjhhh](https://github.com/parkjhhh)|Ryan Na<br/>[@CooolRyan](https://github.com/CooolRyan)|[@HyeJinSeok](https://github.com/HyeJinSeok)|


<br>

## ğŸš€ í”„ë¡œì íŠ¸ ëª©í‘œ
### â–¸ ì—¬ê°€éŒ„

- **ì—¬ê°€éŒ„**ì€ ì—¬í–‰, ê°€ì¡±, ê¸°ë¡ì˜ ì¤„ì„ë§ì´ë©° **ê°€ì¡±ê³¼ í•¨ê»˜ ì†Œì¤‘í•œ ì—¬í–‰ì˜ ì¶”ì–µì„ ê¸°ë¡í•˜ê³  ê°€ì¡±ê³¼ ê³µìœ í•˜ëŠ” ì„œë¹„ìŠ¤**ì…ë‹ˆë‹¤.
- í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” íŠ¹íˆ **60ëŒ€ ì´ìƒ ì—°ë ¹ì¸µì´ ê°€ì¡± ì—¬í–‰ì˜ ì¶”ì–µì„ ê¸°ë¡í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ê°€ ë¶€ì¡±í•œ í˜„ì‹¤**ì„ ê³ ë ¤í•˜ì—¬ **ê°€ì¡±ê³¼ í•¨ê»˜í•œ ì—¬í–‰ ìˆœê°„ì„ ì‰½ê³  í¸ë¦¬í•˜ê²Œ ë‚¨ê¸°ê³  ê³µìœ **í•  ìˆ˜ ìˆë„ë¡ í•˜ê³ ì ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.
<br>

### â–¸ ê¸°ìˆ  ëª©í‘œ
- Servlet ë° JSP ê¸°ë°˜ì˜ Web Application ê°œë°œ
- Sessionì„ í†µí•œ ì‚¬ìš©ì ì¸ì¦ ë° ìƒíƒœ ê´€ë¦¬
- DataBase ì—°ë™ìœ¼ë¡œ ë™ì  ë°ì´í„° ì²˜ë¦¬

<br>


### â–¸ ì„œë¹„ìŠ¤ ëª©í‘œ
- 60ëŒ€ ì—°ë ¹ì¸µì„ ëŒ€ìƒìœ¼ë¡œ í•œ ë§ì¶¤ ì„œë¹„ìŠ¤
- ìˆ˜ìµ ì°½ì¶œì„ ìœ„í•œ ë¹„ì§€ë‹ˆìŠ¤ ëª¨ë¸ êµ¬í˜„

<br>

<br>

## ğŸ“† ê°œë°œ ê¸°ê°„
- 2025.02.03 ~ 2025.02.10

<br>

## ğŸ“š í”„ë¡œì íŠ¸ ì†Œê°œ


### â–¶ ê°€ì¡±ì—¬í–‰ ê¸°ë¡ ë° í”Œëœ ì¶”ì²œ ì• í”Œë¦¬ì¼€ì´ì…˜

- ì§€ë„ API ê¸°ë°˜ ì—¬í–‰ì§€ íƒìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
- ì—¬í–‰ ê¸°ë¡ í¬ìŠ¤íŒ…(ì‚¬ì§„ ì—…ë¡œë“œ ë° ê²Œì‹œê¸€ ì‘ì„± ê°€ëŠ¥)
- ElasticSearch ê¸°ë°˜ ì¸ê¸° ì—¬í–‰ì§€ ë¶„ì„ ë° ì—°ê´€ ê²€ìƒ‰ì–´ ì¶”ì²œ ì‹œìŠ¤í…œ êµ¬ì¶• (ì•„ì´ë””ì–´)

<br>

### â–¶ ì˜ˆìƒ íƒ€ê²Ÿ ê³ ê°ì¸µ

- **50~60ëŒ€ ë¶€ëª¨ ì„¸ëŒ€** â†’ 2030 ìë…€ ì„¸ëŒ€ë¥¼ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ ìœ ì…
- **30~40ëŒ€ ë¶€ëª¨ ì„¸ëŒ€** â†’ ì˜ìœ ì•„ ìë…€ë¥¼ ë‘” ê°€ì¡± ë‹¨ìœ„ì˜ ì¶”ê°€ ìœ ì…

<br>

ğŸ’¡ ê°€ì¡± êµ¬ì„±ì› ëª¨ë‘ê°€ ì„œë¹„ìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ìŠ¤ë§ˆíŠ¸í° ì‚¬ìš©ì— ëŠ¥ìˆ™í•˜ê³ , ì—¬í–‰ì„ ë‹¤ë‹ˆëŠ” ë° ì œì•½ì´ ì ìœ¼ë©°, ê²½ì œì  ì—¬ìœ ê°€ ìˆì–´ í‰ê· ì ì¸ ê°€ì¡±ë³´ë‹¤ **ì—¬í–‰ ë¹ˆë„ê°€ ë†’ì€ ê³„ì¸µ**ì„ ì£¼ìš” íƒ€ê²Ÿìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤ê³  íŒë‹¨í–ˆë‹¤.<br>

ì´ëŸ¬í•œ ê¸°ì¤€ì„ ë°”íƒ•ìœ¼ë¡œ, 2030 ìë…€ ì„¸ëŒ€ì˜ ìœ ì…ì„ ì‹œì‘ì ìœ¼ë¡œ ì‚¼ì•„ ê¶ê·¹ì ìœ¼ë¡œëŠ” ì—¬ê°€éŒ„ì˜ ë³¸ë˜ íƒ€ê²Ÿì¸ **ì€í‡´ í›„ ì—¬ìœ ë¡œìš´ ì‚¶ì„ ì¦ê¸°ë ¤ëŠ” 50~60ëŒ€ ì—°ë ¹ì¸µ**ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ í™•ì‚°ë  ê²ƒì´ë¼ëŠ” ì˜ê²¬ì„ ëª¨ì•˜ë‹¤.<br>

ë˜í•œ 10ì„¸ ë¯¸ë§Œì˜ ì˜ìœ ì•„ë¥¼ ë‘” 30~40ëŒ€ ë¶€ëª¨ ì„¸ëŒ€ëŠ” ê°€ì¡±ê³¼ì˜ **ì¶”ì–µì„ ê¸°ë¡í•˜ëŠ” ë° ë†’ì€ ê´€ì‹¬**ì„ ê°€ì§€ë©° ì‹¤ì œë¡œ ê°€ì¡± ê´€ë ¨ ì‚¬ì§„ì„ ë§ì´ ë‚¨ê¸°ë ¤ëŠ” ê²½í–¥ì´ ìˆë‹¤. ì´ëŸ¬í•œ íŠ¹ì„±ì„ ë°˜ì˜í•˜ë©´, ì´ë“¤ì´ ì„œë¹„ìŠ¤ì— ì ê·¹ì ìœ¼ë¡œ ìœ ì…ë  ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ë©° ì´ë¥¼ í†µí•´ ì—¬ê°€éŒ„ì˜ ì´ˆê¸° í™ë³´ íš¨ê³¼ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.

<br>

### â–¶ ì„œë¹„ìŠ¤ ê°œìš” 
<img src="https://github.com/user-attachments/assets/b541edf9-86a4-4e00-a6ca-27acfd1b6837"
     alt="ì„œë¹„ìŠ¤ ê°œìš”"
     style="display: block; margin: 0 auto; width: 70%; max-width: 400px;">

<br>

### â–¶ ê¸°ëŠ¥ ì†Œê°œ
#### 1. íšŒì›ê°€ì…
![Image](https://github.com/user-attachments/assets/fc1ed61b-7336-48ea-be6d-35570dd59758)
+ **ì´ë¦„, ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸, ì´ë©”ì¼, ê°€ì¡± ê·¸ë£¹ID**ë¥¼ ì…ë ¥í•˜ì—¬ íšŒì›ê°€ì…ì„ í•©ë‹ˆë‹¤. 
+ ë§Œì•½ ì‹¤íŒ¨ì‹œ **"íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."** ë¬¸êµ¬ê°€ ëœ¬ë‹¤.

<br>

<details>
  <summary>íšŒì›ê°€ì… ì‹¤íŒ¨ ë©”ì‹œì§€ ë³´ê¸°</summary>

![register](https://github.com/user-attachments/assets/24574b0c-85e7-44f7-b4e8-7e3160c91899)

</details>

<br>

<hr style="border: 0.5px solid #ccc;" />

#### 2. ë¡œê·¸ì¸<br>
![login](https://github.com/user-attachments/assets/2350c813-4ab8-4ce4-96b3-316d836c5754)


+ **IDì™€ PW**ë¥¼ ì •í™•í•˜ê²Œ ì…ë ¥í•˜ë©´ ë¡œê·¸ì¸ì‹œ ì°½ì´ **main í˜ì´ì§€ë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤**.

<br>

<hr style="border: 0.5px solid #ccc;" />

#### 3. ë©”ì¸
![Image](https://github.com/user-attachments/assets/b1d096db-ee39-41f7-8b4e-4a0ca8bf177e)



+ main í˜ì´ì§€ì—ì„œëŠ” **ê°€ì¡±ë“¤ì´ ì ì€ ëª¨ë“  ê²Œì‹œë¬¼**ê³¼ **ìº˜ë¦°ë” í˜•íƒœë¡œ ì¼ì •**ì„ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
+ ê°€ì¡± ì—¬í–‰ ê¸°ë¡ì— ì í˜€ìˆëŠ” **ì¥ì†Œ**ë“¤ì„ ì§€ë„ì—ì„œ **í•€ í˜•íƒœë¡œ**ë„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>


<hr style="border: 0.5px solid #ccc;" />

#### 4. ë§ˆì´í˜ì´ì§€

![mypage](https://github.com/user-attachments/assets/13108112-2be2-4e29-9747-4eb883483a11)

+ ë§ˆì´í˜ì´ì§€ì—ì„œëŠ” **ë³¸ì¸ì´ ì‘ì„±í•œ ê²Œì‹œê¸€, ë³¸ì¸ ë° ê°€ì¡± ì •ë³´**ë¥¼ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. .<br>
+ ë‚´ê°€ ì“´ ê²Œì‹œë¬¼ì˜ ì œëª©ì„ ëˆ„ë¥´ë©´ **ë‚´ìš©ê³¼ ì¥ì†Œ, ì—¬í–‰ë‚ ì§œì™€ ì‚¬ì§„**ì´ ëœ¹ë‹ˆë‹¤. 

<br>

<hr style="border: 0.5px solid #ccc;" />

 
#### 5. ê²Œì‹œê¸€ ì‘ì„±
![Post_O](https://github.com/user-attachments/assets/e2bd8f97-8008-4a89-bd32-fff601518c0d)

+ ê²Œì‹œê¸€ì„ ì˜¬ë¦¬ê¸° ìœ„í•´ **ì œëª©ê³¼ ë‚´ìš©, ì—¬í–‰ ë‚ ì§œ**ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. 
+ **í‚¤ì›Œë“œë¥¼ ì…ë ¥**í•˜ë©´ ì¥ì†Œë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆê³ , ì¥ì†Œë¥¼ ì„ íƒí•˜ë©´ **ìë™ì ìœ¼ë¡œ ìœ„ì¹˜ê°€ ì„ íƒ**ë©ë‹ˆë‹¤. 
+ **ì‚¬ì§„íŒŒì¼**ì„ ì„ íƒí•´ì„œ ì˜¬ë¦¬ê³  ê²Œì‹œê¸€ì„ ë“±ë¡í•©ë‹ˆë‹¤. 

<br>

<hr style="border: 0.5px solid #ccc;" />

#### 6. ì¶”ì²œ ì—¬í–‰ì§€(ì•„ì´ë””ì–´)

![recommend](https://github.com/user-attachments/assets/095a7e9a-01fe-4dd7-b72f-0367ec16722b)

+ ELKë¥¼ í™œìš©í•´ì„œ DBì— ì €ì¥ëœ í¬ìŠ¤íŒ… ê¸€ì„ ë¶„ì„í•˜ê³  ì—°ê´€ ë‹¨ì–´ë‚˜ ì¶”ì²œ í‚¤ì›Œë“œë¥¼ ì œì‹œ

<br>

<hr style="border: 0.5px solid #ccc;" />



### â–¶ ê¸°ìˆ  ìŠ¤íƒ ë° êµ¬ì¡°
<p>
  <img src="https://img.shields.io/badge/Java-007396?style=flat&logo=Java&logoColor=white">
  <img src="https://img.shields.io/badge/JSP-ff7800?style=flat&logo=coffeescript&logoColor=white">
  <img src="https://img.shields.io/badge/MySQL-4479A1?style=flat&logo=MySQL&logoColor=white">
  <img src="https://img.shields.io/badge/Git-F05032?style=flat&logo=Git&logoColor=white">
</p>

| <span style="color:#FF5733">Back-end</span>                                                                                                   | <span style="color:#FF5733">Front-end</span>                        | <span style="color:#FF5733">Database ì—°ë™</span>                                                         |
|------------------------------------------------------------------------------------------------------------|----------------------------------|----------------------------------------------------------------------|
| â–ª í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì²˜ë¦¬ ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰ <br>  â–ª ë°ì´í„° ì²˜ë¦¬ ë° ê³µí†µ ìœ í‹¸ ì œê³µ  | â–ª UI êµ¬í˜„ ë° ë°ì´í„° ë°”ì¸ë”© | â–ª ì‚¬ìš©ì ë° ê²Œì‹œê¸€ ë°ì´í„° ê´€ë¦¬ <br> â–ª DBConnection ì—°ê²° ê´€ë¦¬ |
                                

<br>

## ğŸ“Œ í”„ë¡œì íŠ¸ í´ë” êµ¬ì¡°

<br>

```
ğŸ“‚ í”„ë¡œì íŠ¸ ë£¨íŠ¸
â”œâ”€â”€ ğŸ“‚ controller
â”‚   â”œâ”€â”€ CheckDuplicateController.class
â”‚   â”œâ”€â”€ LoginController.class
â”‚   â”œâ”€â”€ MainController.class
â”‚   â”œâ”€â”€ MypageController.class
â”‚   â”œâ”€â”€ PostController.class
â”‚   â”œâ”€â”€ RecommendController.class
â”‚   â”œâ”€â”€ RegisterController.class
â”‚
â”œâ”€â”€ ğŸ“‚ domain
â”‚   â”œâ”€â”€ Family.class
â”‚   â”œâ”€â”€ Post.class
â”‚   â”œâ”€â”€ Recommend.class
â”‚   â”œâ”€â”€ User.class
â”‚
â”œâ”€â”€ ğŸ“‚ repository
â”‚   â”œâ”€â”€ FamilyRepository.class
â”‚   â”œâ”€â”€ LoginRepository.class
â”‚   â”œâ”€â”€ MainRepository.class
â”‚   â”œâ”€â”€ MypageRepository.class
â”‚   â”œâ”€â”€ PostRepository.class
â”‚   â”œâ”€â”€ RecommendRepository.class
â”‚   â”œâ”€â”€ UserRepository.class
â”‚
â”œâ”€â”€ ğŸ“‚ resources
â”‚   â”œâ”€â”€ config.properties
â”‚
â”œâ”€â”€ ğŸ“‚ utils
â”‚   â”œâ”€â”€ DBConnection.class
â”‚   â”œâ”€â”€ SecurityUtil.class
â”‚
â”œâ”€â”€ ğŸ“‚ views/jsp
â”‚   â”œâ”€â”€ ğŸ“‚ includes
â”‚   â”‚   â”œâ”€â”€ footer.jsp
â”‚   â”‚   â”œâ”€â”€ header.jsp
â”‚   â”œâ”€â”€ login.jsp
â”‚   â”œâ”€â”€ main.jsp
â”‚   â”œâ”€â”€ mypage.jsp
â”‚   â”œâ”€â”€ post.jsp
â”‚   â”œâ”€â”€ recommend.jsp
â”‚   â”œâ”€â”€ register.jsp
â”‚
â”œâ”€â”€ ğŸ“‚ META-INF
â”‚   â”œâ”€â”€ MANIFEST.MF
â”‚   â”œâ”€â”€ context.xml
```

<br>

## ğŸ“‹ì£¼ìš” ì½”ë“œ

### ğŸ”´ ë¡œê·¸ì¸ê³¼ ì„¸ì…˜

(1) í´ë¼ì´ì–¸íŠ¸ì—ì„œ POST ë°©ì‹ìœ¼ë¡œ ì „ì†¡í•œ idì™€ pwë¥¼ requestë¡œ ë°›ìŒ
```
String id = request.getParameter("id");
String pw = request.getParameter("pw");
```

<br>

(2) LoginRepositoryì—ì„œ validateUser(id, pw)ë¥¼ í˜¸ì¶œí•´ì„œ ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸ê°€ ë§ëŠ” ì‚¬ìš©ìì¸ì§€ í™•ì¸
```
LoginRepository lp = new LoginRepository();
User user = lp.validateUser(id, pw);
```

<br>

(3) validateUser( )ê°€ ìœ íš¨í•œ ì‚¬ìš©ì ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©´, ë¹„ë°€ë²ˆí˜¸ê¹Œì§€ í™•ì¸
```
if (user != null && SecurityUtil.checkPassword(pw, user.getPw())) {
```

<br>

(4) ì„¸ì…˜(Session) ìƒì„± ë° ê°’ ì €ì¥
```
HttpSession session = request.getSession(true);
session.setAttribute("uidkey", user.getUid());
session.setAttribute("namekey", user.getName());
session.setAttribute("idkey", user.getId());
session.setAttribute("emailId", user.getEmail());
session.setAttribute("userFid", user.getFid());
```

<br>

### ğŸŸ  ê²Œì‹œê¸€ ì‘ì„±

// post.jsp <br><br>
<img src="images/post_jsp.png" width="1200">

<br>

// PostRepository.java <br><br>
<img src="images/postRepository.png" width="1200">

<br>

// PostController.java <br><br>
(1) doPost( ) - ê²Œì‹œê¸€ ì €ì¥ ë° ì´ë¯¸ì§€ ì—…ë¡œë“œ
```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    request.setCharacterEncoding("UTF-8");
    response.setContentType("text/html;charset=UTF-8");
```
<br>

(2) ì„¸ì…˜ í™•ì¸ (ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥)
```
HttpSession session = request.getSession(false);
if (session == null || session.getAttribute("idkey") == null || session.getAttribute("userFid") == null) {
    response.sendRedirect(request.getContextPath() + "/login");
    return;
}
```
<br>

(3) ì…ë ¥ê°’(í¼ ë°ì´í„°) ê°€ì ¸ì˜¤ê¸°
```
int uid = (int) session.getAttribute("uidkey");
int fid = (int) session.getAttribute("userFid");

String title = request.getParameter("title");
String description = request.getParameter("description");
String startDate = request.getParameter("start_date");
String endDate = request.getParameter("end_date");
String location = request.getParameter("location");
```

<br>

(4) íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ë° ì´ë¯¸ì§€ ì €ì¥
```
String uploadPath = getServletContext().getRealPath("") + File.separator + "uploads";
File uploadDir = new File(uploadPath);
if (!uploadDir.exists()) {
    uploadDir.mkdirs(); // í´ë”ê°€ ì—†ìœ¼ë©´ ìƒì„±
}


String imgsrc = null;
Part filePart = request.getPart("imgsrc"); // `imgsrc` input name ê°€ì ¸ì˜¤ê¸°
if (filePart != null && filePart.getSize() > 0) {
    String fileName = UUID.randomUUID().toString() + "_" + filePart.getSubmittedFileName();
    imgsrc = "uploads/" + fileName; // DBì— ì €ì¥í•  ìƒëŒ€ ê²½ë¡œ

    // íŒŒì¼ ì €ì¥
    Path filePath = Path.of(uploadPath, fileName);
    Files.copy(filePart.getInputStream(), filePath, StandardCopyOption.REPLACE_EXISTING);
}
```

<br>

(5) DBì— ê²Œì‹œê¸€ ì €ì¥
```
boolean isInserted = postRepository.insertPost(title, description, startDate, endDate, location, imgsrc, fid, uid);
```

<br>

(6) ì„±ê³µ ì—¬ë¶€ì— ë”°ë¼ í˜ì´ì§€ ì´ë™
```
if (isInserted) {
    response.sendRedirect(request.getContextPath() + "/post?status=success");
} else {
    response.sendRedirect(request.getContextPath() + "/post?status=failure");
}
```

<br>

### ğŸŸ¡ ë§ˆì´í˜ì´ì§€ ì¡°íšŒ

(1) doGet( ) - ë§ˆì´í˜ì´ì§€ ì •ë³´ ì¡°íšŒ ë° í™”ë©´ í‘œì‹œ
```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        HttpSession session = request.getSession(false); // ì„¸ì…˜ ê°€ì ¸ì˜¤ê¸°
```
<br>

(2) ë¡œê·¸ì¸ í™•ì¸ (ì„¸ì…˜ ì²´í¬)
```
// ì„¸ì…˜ì´ ì—†ê±°ë‚˜ userIdê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰íŠ¸
if (session == null || session.getAttribute("idkey") == null) {
    response.sendRedirect(request.getContextPath() + "login"); // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    return;
}
```
<br>

(3) í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
```
int userId = (int) request.getSession().getAttribute("uidkey");
int fid = (int) request.getSession().getAttribute("userFid");
```
<br>

(4) DBì—ì„œ í•„ìš”í•œ ë°ì´í„° ì¡°íšŒ
```
// í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
User userInfo = userRepository.getUserById(userId);

// ì‚¬ìš©ìê°€ ì‘ì„±í•œ ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸°
List<Post> myPosts = postRepository.getPostsByUserId(userId);

// ì‚¬ìš©ì ê°€ì¡± ì •ë³´ ê°€ì ¸ì˜¤ê¸°
Family family = familyRepository.getFamilyById(fid);

// ê°™ì€ ê°€ì¡± ê·¸ë£¹(fId)ì— ì†í•˜ëŠ” ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
List<User> familyMembers = userRepository.getUsersByFamilyId(fid);
```
<br>

(5) ì¡°íšŒí•œ ë°ì´í„°ë¥¼ JSPì— ë„˜ê²¨ì£¼ê¸°
```
request.setAttribute("userInfo", userInfo);
request.setAttribute("myPosts", myPosts);
request.setAttribute("family", family);
request.setAttribute("familyMembers", familyMembers);

request.getRequestDispatcher("/views/jsp/mypage.jsp").forward(request, response);
```

<br>


## ğŸš‘ Trouble Shooting
### â–¸ include UTF-8 ê¹¨ì§ í˜„ìƒ 
```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<nav class="bg-blue-500 p-4 text-white flex justify-between">
	    <a href="main.jsp" class="text-lg font-bold">ì—¬í–‰ ê¸°ë¡</a>
	    <ul class="flex space-x-4">
	        <li><a href="mypage.jsp" class="hover:underline">ë§ˆì´í˜ì´ì§€</a></li>
	        <li><a href="post.jsp" class="hover:underline">ê²Œì‹œê¸€ ì‘ì„±</a></li>
	        <li><a href="recommend.jsp" class="hover:underline">ì¶”ì²œ ì—¬í–‰ì§€</a></li>
	    </ul>
	</nav>

</body>
</html>
```


![alt text](image-2.png)


```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" %>
```


- pageEncodingìœ¼ë¡œ í•´ê²° ë¶ˆê°€

<br><br>






### â–¸ window ê°ì²´ ë‚´ kakao ë³€ìˆ˜

![alt text](image-1.png)

- response ê°ì²´ë¥¼ í™•ì¸í•œ ê²°ê³¼ kakao ê°ì²´ëŠ” window ê°ì²´ í•˜ìœ„ì˜ í”„ë¡œí¼í‹°ë¡œ ì¶”ê°€ë¨

<br>

### â–¸ Failed to execute 'write' on 'Document'

- ë¹„ë™ê¸°ë¡œ ë¡œë“œ (async defer) ëœ ì¹´ì¹´ì˜¤ APIê°€ ë‚´ë¶€ì ìœ¼ë¡œ document.write()ë¥¼ ì‹¤í–‰<br>
- ë¹„ë™ê¸° ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” document.write()ê°€ ì°¨ë‹¨ë¨ â†’ í¬ë¡¬ ìµœì‹  ë²„ì „ì—ì„œ ì˜¤ë¥˜ ë°œìƒ<br>
- ì¹´ì¹´ì˜¤ APIê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì§€ ì•Šì•„ window.kakao.mapsê°€ undefined ìƒíƒœë¡œ ë‚¨ìŒ<br><br><br>


âœ… **async defer ì œê±° í›„ onload ì´ë²¤íŠ¸ë¡œ ì‹¤í–‰**<br>

![alt text](image.png)

<br>

### â–¸ Enctype = multipart ê°ì²´ ì „ë‹¬ ê°„ ì˜¤ë¥˜

![alt text](image-3.png)<br><br>


- ì´ì „ servletì˜ ê²½ìš° enctype ë³€í™˜ì„ í†µí•œ form ì „ë‹¬ì€ apache commons ê´€ë ¨ libì„ í†µí•´ ì´ë£¨ì–´ì§


- ê·¸ëŸ¬ë‚˜ ì´ë¥¼ ì‚¬ìš©í•˜ì HttpServletRequest request ê°ì²´ ì¸ì‹ ë¬¸ì œê°€ ë°œìƒ


- í˜„ì¬ servletì€ 6 ë²„ì „ìœ¼ë¡œ ì´ì „ libì™€ í˜¸í™˜ì´ ë˜ì§€ ì•ŠìŒì„ ì§ì‘í•¨

<br>

```
 File uploadDir = new File(uploadPath);
        if (!uploadDir.exists()) {
            uploadDir.mkdirs(); // í´ë”ê°€ ì—†ìœ¼ë©´ ìƒì„±
        }

        String imgsrc = null;
        Part filePart = request.getPart("imgsrc"); // `imgsrc` input name ê°€ì ¸ì˜¤ê¸°
        if (filePart != null && filePart.getSize() > 0) {
            String fileName = UUID.randomUUID().toString() + "_" + filePart.getSubmittedFileName();
            imgsrc = "uploads/" + fileName; // DBì— ì €ì¥í•  ìƒëŒ€ ê²½ë¡œ

            // íŒŒì¼ ì €ì¥
            Path filePath = Path.of(uploadPath, fileName);
            Files.copy(filePart.getInputStream(), filePath, StandardCopyOption.REPLACE_EXISTING);
        }
```

<br>

- servlet 6ë²„ì „ì— ë§ëŠ” File ì „ë‹¬ ë°©ì‹ì„ ì‚¬ìš©. getPartë¥¼ í†µí•´ íŒŒì¼ ë¬¼ë¦¬ ì •ë³´ë¥¼ ë°›ì•„ì˜´.


```
@MultipartConfig(
	    fileSizeThreshold = 1024 * 1024 * 1, // 1MB
	    maxFileSize = 1024 * 1024 * 10,      // 10MB
	    maxRequestSize = 1024 * 1024 * 15    // 15MB
	)
```
